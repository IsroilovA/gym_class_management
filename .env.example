# .env.example — Development environment template
#
# Copy to .env and adjust values as needed:
#   cp .env.example .env
#
# This file is used by the DEV stack:
#   docker compose up --build
#
# For production, see .env.prod.example instead.

# Django
# Use `development` locally and `production` in deployed environments.
ENVIRONMENT=development
# Development placeholder only. Set a strong unique value in production.
# NOTE: If the value contains a literal $, escape it as $$ for docker compose.
SECRET_KEY=change-me-to-a-real-secret-key
DEBUG=True
# In production, set this to your real domain (e.g., example.com).
# Nginx forwards the Host header, so Django checks it against ALLOWED_HOSTS.
ALLOWED_HOSTS=localhost,127.0.0.1

# Database — used by both Django and docker-compose (Postgres container).
# Development-only placeholders. Replace with unique local values.
# Never reuse these in staging/production.
DB_NAME=local_dev_db_name
DB_USER=local_dev_db_user
DB_PASSWORD=local_dev_db_password
DB_HOST=localhost
DB_PORT=5432

# --- Compose File Structure ---
# Base:     docker-compose.yml          (shared service definitions)
# Dev:      docker-compose.override.yml (auto-loaded — runserver, bind-mount, ports)
# Prod:     docker-compose.prod.yml     (explicit — Gunicorn, nginx, restart policies)
#
# Dev command:   docker compose up --build
# Prod command:  docker compose --env-file .env.prod -f docker-compose.yml -f docker-compose.prod.yml up -d --build

# --- Nginx / Reverse Proxy ---
# Nginx is the only service that exposes a host port (80, and 443 with TLS).
# Gunicorn (app) is internal-only on the Docker network.
#
# Production checklist:
#   1. Set ENVIRONMENT=production — this enables SECURE_SSL_REDIRECT,
#      SECURE_PROXY_SSL_HEADER, HSTS, and secure cookies automatically.
#   2. Do NOT set ENVIRONMENT=production until TLS is configured in Nginx,
#      or SECURE_SSL_REDIRECT will cause redirect loops.
#   3. To add TLS later: update nginx/default.conf with ssl certificates,
#      expose port 443 in docker-compose.yml. No Django changes needed.
#
# Local development: port 80 works over plain HTTP with ENVIRONMENT=development.
# If port 80 is already in use, change "80:80" in docker-compose.yml (e.g., "8080:80").

# --- TLS Certificates ---
# Place fullchain.pem and privkey.pem in the ./certs/ directory.
#
# For local development, generate self-signed certs:
#   openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
#     -keyout certs/privkey.pem -out certs/fullchain.pem \
#     -subj "/CN=localhost"
#
# For production, use real certificates (e.g., Let's Encrypt certbot).
